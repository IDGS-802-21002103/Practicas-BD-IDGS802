{% extends "index.html"%}
{% import '_macros.html' as macros %}
{% block content %}

<div class="mx-auto col-md-10 shadow-lg p-4 my-5 border rounded-4">
    <div class="row text-center">
        <span class="h1">
            <kbd>AÑADIR</kbd>
        </span>
    </div>

    <form action="/agregar_venta" method="POST" novalidate>
        <div class="row">
            <div class="col-md-4">
                {{ macros.radio_list(venta_form.tamano_pizza, class="form-check-input") }}
            </div>
            <div class="col-md-4">
                {{ macros.check_box(venta_form.ingrediente_pina, class="form-check-input") }}
                {{ macros.check_box(venta_form.ingrediente_jamon, class="form-check-input") }}
                {{ macros.check_box(venta_form.ingrediente_pepperoni, class="form-check-input") }}


            </div>
            <div class="col-md-4">
                {{ macros.input_float(venta_form.numero_pizzas, class="form-control text-uppercase") }}
                <div class="d-none">
                    {{ macros.input_float(venta_form.subtotal, class="form-control text-uppercase")}}
                </div>

            </div>

            <div class="text-center">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                <button class="btn btn-success m-1" type="submit" id="agregarDetalleVenta">
                    AGREGAR
                </button>
            </div>
        </div>
    </form>

</div>

<div class="mx-auto col-md-10 shadow-lg p-4 my-5 border rounded-4">
    <div class="row text-center">
        <span class="h1">
            <kbd>PEDIDO</kbd>
        </span>
    </div>
    <div class="table-responsive">
        <table class="table table-hover">
            <caption>TABLA DE PEDIDO</caption>
            <thead>
                <tr class="text-center">
                    <th>#</th>
                    <th>TAMAÑO</th>
                    <th>INGREDIENTES</th>
                    <th>NUM PIZZAS</th>
                    <th>SUBTOTAL</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody class="text-center" id="cuerpoTabla">
                {% if contenido_venta %}
                    {% for venta in contenido_venta %}
                    <tr>
                        <td>{{loop.index}}</td>
                        <td>{{venta.tamano}}</td>
                        <td>{{venta.ingredientes}}</td>
                        <td>{{venta.numero_pizzas}}</td>
                        <td>{{venta.subtotal}}</td>
                        <td><a class="btn btn-danger" href="/eliminar_venta?id= {{loop.index}}">ELIMINAR</a></td>
                    </tr>
                    {% endfor %}
                {% endif %}

            </tbody>
            <tfoot>

            </tfoot>
        </table>
    </div>
    <div class="row">
        <div class="col-md-4">
            <span>TOTAL: </span><span id="totalVenta" class="bold">
                {% if total %}
                {{total}}
                {% endif %}
            </span>
        </div>
    </div>

</div>

<div class="mx-auto col-md-10 shadow-lg p-4 my-5 border rounded-4">
    <div class="row text-center">
        <span class="h1">
            <kbd>CLIENTE</kbd>
        </span>
    </div>

    <form action="/pizzeria" id="" method="POST" novalidate>
        <div class="row">
            {{ macros.date_field(cliente_form.fecha, class="form-control text-uppercase")}}
        </div>
        <div class="row">
            <div class="col-md-4">
                {{ macros.input_float(cliente_form.nombre, class="form-control text-uppercase") }}
            </div>
            <div class="col-md-4">
                {{ macros.input_float(cliente_form.direccion, class="form-control text-uppercase") }}
            </div>
            <div class="col-md-4">
                {{ macros.input_float(cliente_form.telefono, class="form-control text-uppercase") }}
            </div>

        </div>

        <div class="text-center">

            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <button class="btn btn-success m-1" type="submit" name=ventas" value="ventas" id="ventas">
                CERRAR VENTA
            </button>
            <a href="/index" class="btn btn-warning m-1">CANCELAR</a>


        </div>

    </form>

</div>

<div class="mx-auto col-md-10 shadow-lg p-4 my-5 border rounded-4">
    <div class="row text-center">
        <span class="h1">
            <kbd>BUSCADOR</kbd>
        </span>
    </div>

    <form action="/buscar_venta" id="" method="POST" novalidate>

        <div class="row">
            <div class="col-md-4">
                {{ macros.input_float( busqueda_form.ano, class="form-control text-uppercase")}}
            </div>
            <div class="col-md-4">
                {{ macros.input_float( busqueda_form.mes, class="form-select text-uppercase")}}
            </div>
            <div class="col-md-4">
                {{ macros.input_float( busqueda_form.dia, class="form-control text-uppercase")}}
            </div>
        </div>

        <div class="text-center">

            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <button class="btn btn-success m-1" type="submit" name=ventas" value="ventas" id="ventas">
                BUSCAR
            </button>
            <a href="/index" class="btn btn-warning m-1">CANCELAR</a>

        </div>

    </form>

    <form action="/buscar_venta_dia" id="" method="POST" novalidate >
        <div class="d-flex justify-content-center">
            <div class="col-md-5">
            
                {{ macros.input_float( busqueda_dia_form.dia_semana, class="form-select text-uppercase")}}
            
            </div>
        </div>
        

        <div class="text-center">

            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <button class="btn btn-success m-1" type="submit" name=ventas" value="ventas" id="ventas">
                BUSCAR
            </button>
            <a href="/index" class="btn btn-warning m-1">CANCELAR</a>


        </div>

    </form>

    <div class="table-responsive">
        <table class="table table-hover">
            <caption>TABLA DE BUSQUEDAS</caption>
            <thead>
                <tr class="text-center">
                    <th>#</th>
                    <th>FECHA</th>
                    <th>TOTAL</th>
                    <th>NOMBRE</th>
                    <th>DIRECCION</th>
                    <th>TELEFONO</th>
                </tr>
            </thead>
            <tbody class="text-center" id="cuerpoTabla">
                {% if busqueda_venta %}
                {% for venta in busqueda_venta %}
                <tr>
                    <td>{{ venta.id }}</td>
                    <td>{{ venta.fecha }}</td>
                    <td>{{ venta.total }}</td>
                    <td>{{ venta.nombre }}</td>
                    <td>{{ venta.direccion }}</td>
                    <td>{{ venta.telefono }}</td>

                </tr>
                {% endfor %}
                {% else %}
                <tr>
                    <td colspan="6">No se encontraron ventas.</td>
                </tr>
                {% endif %}
            </tbody>
            <tfoot>

            </tfoot>
        </table>
    </div>

</div>

{% endblock %}